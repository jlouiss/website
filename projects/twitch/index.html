<html ng-app="twitchApp">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta name="author" content="Jean Louis Salbego">

  <title>Twitch Streams Viewer</title>

  <link rel="stylesheet" href="../../bower_components/bootstrap/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="../../bower_components/font-awesome/css/font-awesome.min.css">
  <link rel="stylesheet" href="css/style.css">

  <script>
    (function(i, s, o, g, r, a, m) {
      i['GoogleAnalyticsObject'] = r;
      i[r] = i[r] || function() {
        (i[r].q = i[r].q || []).push(arguments)
      }, i[r].l = 1 * new Date();
      a = s.createElement(o),
        m = s.getElementsByTagName(o)[0];
      a.async = 1;
      a.src = g;
      m.parentNode.insertBefore(a, m)
    })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-74638070-1', 'auto');
    ga('send', 'pageview');
  </script>
</head>

<body ng-controller="MainController">
  <div class="jumbotron text-center">
    <h1>Twitch Streamers</h1>
  </div>

  <div class="container">
    <div class="row">

      <div class="col-xs-12">
        <section ng-controller="TabController">

          <ul class="nav nav-pills">
            <li ng-class="{active: isSet('online')}">
              <a href ng-click="setTab('online')">
                <i class="fa fa-twitch"></i> Online
              </a>
            </li>
            <li ng-class="{active: isSet('offline')}">
              <a href ng-click="setTab('offline')">
                <i class="fa fa-times-circle"></i> Offline
              </a>
            </li>
            <li ng-class="{active: isSet('all')}">
              <a href ng-click="setTab('all')">
                <i class="fa fa-bars"></i> All
              </a>
            </li>
          </ul>

          <hr>

          <div ng-show="isSet('online')">
            <div ng-repeat="streamer in streamers" ng-if="streamer.online">
              <div class="media">

                <div class="media-left">
                  <a href="{{streamer.data.channel.url}}" target="_blank">
                    <img class="media-object img-thumbnail profile-img" ng-src="{{streamer.data.channel.logo}}" alt="{{streamer.name}}">
                  </a>
                </div>

                <div class="media-body">
                  <div class="media-heading">
                    <h3 class="streamer">{{streamer.name}}</h3>
                    <br>
                    <small>
                      Status: <i class="text-muted">{{streamer.data.channel.status}}</i> <br>
                      Viewers: {{streamer.data.viewers}} <br>
                      Language: {{streamer.data.channel.broadcaster_language}}
                    </small>
                  </div>
                  <a href="{{streamer.data.channel.url}}" target="_blank">
                    <figure class="figure">
                      <img class="img-thumbnail img-responsive visible-xs" ng-src="{{streamer.data.preview.small}}">
                      <img class="img-thumbnail img-responsive visible-sm" ng-src="{{streamer.data.preview.medium}}">
                      <img class="img-thumbnail img-responsive visible-md visible-lg" ng-src="{{streamer.data.preview.large}}">

                      <figcaption class="figure-caption">
                        {{'Playing: ' + streamer.data.channel.game}}
                      </figcaption>
                    </figure>
                  </a>
                </div>

              </div>
            </div>
          </div>

          <div ng-show="isSet('offline')">
            <p class="text-muted">These streamers are currently offline.</p>
            <div ng-repeat="streamer in streamers" ng-if="!streamer.online">
              <h3 class="streamer offline">
                {{streamer.name}}
                <i class="fa fa-exclamation-circle" ng-if="!streamer.exists" title="The account does not exist or has been deleted"></i>
              </h3>
            </div>
            <p class="text-muted">These streamers are currently offline.</p>
          </div>

          <div ng-show="isSet('all')">
            <div ng-repeat="streamer in streamers">
              <h3 class="streamer offline" ng-if="!streamer.online">
                {{streamer.name}}
                <i class="fa fa-exclamation-circle" ng-if="!streamer.exists" title="Inexistent or deleted account"></i>
              </h3>
              <a href="{{streamer.data.channel.url}}" ng-if="streamer.online" target="_blank">
                <h3 class="streamer">{{streamer.name}}</h3>
              </a>
            </div>
          </div>

        </section>
      </div>

    </div>
  </div>


  <footer class="footer">
    <div class="container text-center">
      <p>
        Written and Coded by
        <a href="http://jlouiss.github.io/" target="_blank">Jean Louis Salbego</a> 2016
      </p>
    </div>
  </footer>

  <script src="../../bower_components/angular/angular.min.js"></script>
  <script src="js/app.js"></script>
</body>

</html>
